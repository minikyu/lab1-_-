<!DOCTYPE html>
<!--
this is the lab1 that in the form of javascript

a calculator


-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Calculator</title>

    <!--functions that realize the calculator-->
    <script>
        var formulatoshow="";       //formula string used to show
        var result="";             //save calculator value
        var save="0";               //the saved number

        function calculation(com) {

            //have calculated, clear all and restart
            if (result !=""&& com !="save")
            {
                formulatoshow="";
                result="";
            }

            <!--enter formula-->
            switch(com)
            {
                case"clear":
                    formulatoshow="";
                    result="";
                    break;
                case"back":
                    formulatoshow=formulatoshow.substr(0,formulatoshow.length-1);
                    break;
                case "save":
                    save=formulatoshow;
                    break;
                case "getsave":
                    formulatoshow=formulatoshow+save;
                    break;
                case "result":
                    if (formulatoshow=="")result="";
                    else{
                        try{
                            result=eval(formulatoshow);
                        }
                        catch (exception){
                            window.alert(exception);
                        }
                    }
                    break;
                default:
                    formulatoshow += com;
                    break;

            }

            document.getElementById("in").value=formulatoshow;
            document.getElementById("out").value=result;
        }


    </script>
</head>


<body>
<h1 style="text-align: center">Calculator</h1>

<!--input boxes and buttons-->
<table align="center">
    <tr><td>formula</td></tr>
    <tr>
        <td height="30"><input type="text" id="in" readonly="readonly" style="height: 30px;width: 320px"/></td>
    </tr>
    <tr><td>answer</td></tr>
    <tr>
        <td height="30"><input type="text" id="out"readonly="readonly" style="height: 30px;width: 320px"/></td>
    </tr>

</table>

<table align="center">

    <tr>

        <td><button  type="button" onclick="calculation('1')" style="height: 50px;width: 50px">1</button></td>
        <td><button  type="button" onclick="calculation('2')" style="height: 50px;width: 50px">2</button></td>
        <td><button  type="button" onclick="calculation('3')" style="height: 50px;width: 50px">3</button></td>
        <td><button  type="button" onclick="calculation('+')" style="height: 50px;width: 50px">+</button></td>
        <td><button  type="button" onclick="calculation('result')" style="height: 50px;width: 50px">=</button></td>
        <td><button type="button" onclick="calculation('back')" style="width: 50px;height: 50px">DEL</button></td>

    </tr>

    <tr>

        <td><button type="button" onclick="calculation('4')" style="width: 50px;height: 50px">4</button></td>
        <td><button type="button" onclick="calculation('5')" style="width: 50px;height: 50px">5</button></td>
        <td><button type="button" onclick="calculation('6')" style="width: 50px;height: 50px">6</button></td>
        <td><button type="button" onclick="calculation('-')" style="width: 50px;height: 50px">-</button></td>
        <td><button type="button" onclick="calculation('(')" style="width: 50px;height: 50px">(</button></td>
        <td><button type="button" onclick="calculation('clear')" style="width: 50px;height: 50px">AC</button></td>

    </tr>

    <tr>

        <td><button type="button" onclick="calculation('7')" style="width: 50px;height: 50px">7</button></td>
        <td><button type="button" onclick="calculation('8')" style="width: 50px;height: 50px">8</button></td>
        <td><button type="button" onclick="calculation('9')" style="width: 50px;height: 50px">9</button></td>
        <td><button type="button" onclick="calculation('*')" style="width: 50px;height: 50px">*</button></td>
        <td><button type="button" onclick="calculation(')')" style="width: 50px;height: 50px">)</button></td>

    </tr>

    <tr>

        <td><button type="button" onclick="calculation('0')" style="width: 50px;height: 50px">0</button></td>
        <td><button type="button" onclick="calculation('.')" style="width: 50px;height: 50px">.</button></td>
        <td><button type="button" onclick="calculation('%')" style="width: 50px;height: 50px">%</button></td>
        <td><button type="button" onclick="calculation('/')" style="width: 50px;height: 50px">/</button></td>
        <td><button type="button" onclick="calculation('save')" style="width: 50px;height: 50px">M</button></td>
        <td><button type="button" onclick="calculation('getsave')" style="width: 50px;height: 50px">R</button></td>

    </tr>
</table>

<p id="test"></p>
<!--unit test -->
<script>
    //test
    function test( casenumber,bl) {
        if(bl==true)
        {
            document.getElementById("test").innerHTML += "case"+casenumber+":Pass\n";
        }
        else{
            document.getElementById("test").innerHTML += "case"+casenumber+":Fail\n";
        }

    }

    //case1
    calculation("1");
    calculation("result");
    test("1",result==1);
    //case2
    calculation("1+5-8");
    calculation("result");
    test("2",result==-2);
    //case3
    calculation("3*5-3+5/5");
    calculation("result");
    test("3",result==13);
    //case4
    calculation("5*(7-1)/3");
    calculation("result");
    test("4",result==10);
    //case5
    calculation("656154");
    calculation("back");
    test("5",formulatoshow=="65615");
    calculation("result");
    //case6
    calculation("4*2");
    calculation("result");
    calculation("save");
    calculation("2*");
    calculation("getsave");
    calculation("result");
    test("6",result==16);
    //case7
    calculation("7");
    calculation("clear");
    test("7",result==""&&formulatoshow=="");


</script>

</body>
</html>